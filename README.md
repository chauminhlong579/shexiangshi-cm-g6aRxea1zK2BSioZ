国庆回来之后服务器就被搞了，一直没用完过的流量，竟然神奇般就被耗费完了，这就要承担每天被扣费的问题了，而且正常用户访问也很慢。

于是赶紧用官方的安全工具扫描了服务器，没发现问题。之后看了 Nginx 的访问日志，豁，不太正常啊！访问日志很多，而且增长速度也很快，于是就得出结论：**网站被爬了**！

## 视频

[https://www.bilibili.com/video/BV1gvsPzGEWo/](https://github.com)

## 解决方案

既然知道问题了，那就上点手段吧：

1. 将频繁访问的 IP 拉入黑名单。
2. 购买更多的 CDN 流量，应对爬虫动态 IP。

因为前几天比较忙，所以就暂时这样处理了。

> 但后面几天看日志，发现流量依旧嘎嘎飙升、CDN 流量也嘎嘎飙升，防范效果不明显。

## 彻底解决

于是趁着这个周末比较闲，准备彻底解决一下这个问题，但没想到，当我把网站关掉，把所有端口全部禁掉，竟然还有 2M/S 的带宽消耗。

逆天了，这一个小时就是 7GB 的流量消耗啊，而且所有的端口都被禁了，为什么还有 2M/S 的带宽消耗？官方监守自盗？

## 找官方对质

于是在云服务器提了工单询问官方原因？

最后得到的回复，竟然是服务器中病毒了。

## 解决方案与启示

于是重装系统加部署程序，不到10分钟，问题就全部解决了。

所以得出以下结论：

1. 遇到事情一定要认真分析出问题的根本原因，否则一切都是徒劳。
2. 安全策略一定要严格，不然会有安全问题。
3. 买服务器一定不能买固定流量服务器，否则会出现我这样的问题，劳民伤财。

> 本文已收录到我的面试小站 [www.javacn.site](https://github.com):[西部世界加速](https://xibujiasu.com)，其中包含的内容有：场景题、SpringAI、SpringAIAlibaba、并发编程、MySQL、Redis、Spring、Spring MVC、Spring Boot、Spring Cloud、MyBatis、JVM、设计模式、消息队列、Dify、Coze、AI常见面试题等。
